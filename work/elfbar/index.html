<!DOCTYPE html>
<html lang="en-US">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ELF BAR - Oleg Shmarov</title>
    <link rel="stylesheet" href="../../css/project.css">
    <link rel="icon" href="../../img/favicon.webp" type="image/svg+xml">
    <script>
        (function () {
            const visited = sessionStorage.getItem('has_visited_site');
            const html = document.documentElement;
            if (visited) html.classList.add('is-visited');
            else { html.classList.add('is-animating'); sessionStorage.setItem('has_visited_site', 'true'); }
        })();
    </script>
</head>

<body class="project-page">

    <header class="semplice-header">
        <div class="smp-nav-row">
            <div class="nav-logo">
                <a href="../../" class="image-link">
                    <img src="../../img/logo.svg" alt="Logo">
                </a>
            </div>
            <nav>
                <ul>
                    <li><a href="../../">Work</a></li>
                    <li><a href="../../reel/">Reel</a></li>
                    <li><a href="../../play/">Play</a></li>
                    <li><a href="../../info/">About</a></li>
                </ul>
            </nav>
            <button class="mobile-menu-btn" onclick="toggleMenu()"><span></span><span></span><span></span></button>
        </div>
    </header>

    <div class="mobile-menu-overlay" id="mobileOverlay">
        <ul>
            <li><a href="../../">Work</a></li>
            <li><a href="../../reel/">Reel</a></li>
            <li><a href="../../play/">Play</a></li>
            <li><a href="../../info/">About</a></li>
        </ul>
    </div>

    <main id="content-holder">
        <div class="smp-container">
            <div class="project-content">
                <div class="project-header-wrapper project-anim-item">
                    <div class="project-header-block">
                        <h1 class="project-title">ELF BAR Promotion Video</h1>
                        <div class="project-meta">Commercial / 2022</div>
                    </div>
                    <div class="project-description-block">
                        <p class="project-description">
                            A promotional video for Elf Bar, showcasing the sleek design and vibrant flavors of their
                            disposable vapes. The project involved 3D modeling, texturing, and fluid simulations to
                            visualize the smooth airflow and rich taste profile.
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- CUSTOM PLAYER WRAPPER -->
        <div class="reel-wrapper project-anim-item">
            <div class="reel-container" id="videoContainer">
                <video class="custom-video" id="reelVideo" playsinline muted poster="../../img/preview1.png">
                    <source src="https://video.f1nal.me/elfbar.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>

                <!-- Center Play Button -->
                <div class="player-overlay" id="playOverlay">
                    <div class="player-logo-btn" id="playBtnInner">
                        <div class="play-icon-wrap">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M5 3L19 12L5 21V3Z" />
                            </svg>
                        </div>
                    </div>
                </div>

                <!-- Controls Bar -->
                <div class="player-controls">
                    <div class="progress-container" id="progressContainer">
                        <div class="progress-track">
                            <div class="progress-fill" id="progressBar"></div>
                        </div>
                    </div>

                    <div class="player-buttons-right">
                        <button class="control-btn" id="muteBtn">
                            <svg id="iconMute" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M3.63 3.63a.996.996 0 000 1.41L7.29 8.7 7 9H4c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1h3l3.29 3.29c.63.63 1.71.18 1.71-.71v-4.17l4.18 4.18c-.49.37-1.02.68-1.6.91-.36.15-.58.53-.58.92 0 .72.73 1.18 1.39.91.8-.33 1.55-.77 2.22-1.31l1.34 1.34a.996.996 0 101.41-1.41L5.05 3.63a.996.996 0 00-1.42 0zM19 12c0 .82-.15 1.61-.41 2.34l1.53 1.53c.56-1.17.88-2.48.88-3.87 0-3.83-2.4-7.11-5.78-8.4-.59-.23-1.22.23-1.22.86v.19c0 .38.25.71.61.85C17.18 6.54 19 9.06 19 12zm-8.71-6.29l-.17.17L12 7.76V6.41c0-.89-1.08-1.34-1.71-.71z" />
                            </svg>
                            <svg id="iconSound" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"
                                style="display: none;">
                                <path
                                    d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z" />
                            </svg>
                        </button>
                        <button class="control-btn" id="fsBtn">
                            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z" />
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class="smp-container">
            <div class="project-content">
                <div class="project-gallery">
                    <!-- TODO: Add actual images from Behance here -->
                    <div class="project-media-item p-grid-half project-anim-item">
                        <img src="https://placehold.co/700x700/111/FFF?text=Elf+Bar+Flavor+1" alt="Detail 1">
                    </div>
                    <div class="project-media-item p-grid-half project-anim-item">
                        <img src="https://placehold.co/700x700/222/FFF?text=Elf+Bar+Flavor+2" alt="Detail 2">
                    </div>
                    <div class="project-media-item p-grid-full project-anim-item">
                        <img src="https://placehold.co/1400x788/333/FFF?text=Wide+Shot+Render" alt="Wide Shot">
                    </div>
                </div>

                <div class="project-credits project-anim-item">
                    <p><strong>Client:</strong> Elf Bar</p>
                    <p><strong>Role:</strong> 3D Motion Design, Art Direction</p>
                    <p><strong>Tools:</strong> Houdini, Redshift, Nuke</p>
                </div>

                <div class="project-navigation project-anim-item">
                    <a href="../sber-creative-frame/">← SBER Creative Frame</a>
                    <a href="../football-dynamics/">Football Dynamics →</a>
                </div>

                <footer class="footer-section">
                    <div class="footer-top-row">
                        <div class="footer-links">
                            <a href="https://www.behance.net/f1nal" target="_blank">Behance</a>
                            <a href="https://www.linkedin.com/in/f1nal/" target="_blank">LinkedIn</a>
                            <a href="https://instagram.com/f1nal" target="_blank">Instagram</a>
                        </div>
                        <div class="footer-email"><a href="mailto:shmarov.oleg@gmail.com">shmarov.oleg@gmail.com</a>
                        </div>
                    </div>
                    <div class="footer-divider"></div>
                    <div class="footer-bottom-row">
                        <div class="footer-copy">2025 | Oleg Shmarov®</div>
                    </div>
                </footer>
            </div>
        </div>
    </main>

    <!-- SCROLL TO TOP BUTTON -->
    <button class="back-to-top" id="scrollToTopBtn" aria-label="Scroll to top">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 4l-8 8h6v8h4v-8h6z" />
        </svg>
    </button>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            if (document.documentElement.classList.contains('is-animating')) {
                setTimeout(() => { document.querySelector('.semplice-header')?.classList.add('start-anim'); }, 500);
            }
            const contentItems = document.querySelectorAll('.project-anim-item');
            contentItems.forEach((item, index) => {
                setTimeout(() => { item.classList.add('animate-in'); }, 200 + (index * 100));
            });
            setTimeout(() => document.querySelector('.footer-section').classList.add('animate-in'), 200 + (contentItems.length * 100) + 100);

            // --- SCROLL TO TOP ---
            const btn = document.getElementById('scrollToTopBtn');
            if (btn) {
                const checkScroll = () => {
                    const y = window.scrollY || document.documentElement.scrollTop;
                    if (y > 300) {
                        btn.classList.add('is-visible');
                    } else {
                        btn.classList.remove('is-visible');
                    }
                };

                window.addEventListener('scroll', checkScroll, { passive: true });
                checkScroll(); // Check immediately

                btn.addEventListener('click', (e) => {
                    e.preventDefault();
                    const start = window.scrollY || document.documentElement.scrollTop;
                    const startTime = performance.now();
                    const duration = 800;
                    const easeOutCubic = t => (--t) * t * t + 1;

                    function scrollStep(timestamp) {
                        const currentTime = timestamp - startTime;
                        let progress = Math.min(currentTime / duration, 1);
                        const ease = easeOutCubic(progress);
                        window.scrollTo(0, start * (1 - ease));
                        if (currentTime < duration) {
                            requestAnimationFrame(scrollStep);
                        }
                    }
                    requestAnimationFrame(scrollStep);
                });
            }

            // --- PLAYER LOGIC ---
            const video = document.getElementById('reelVideo');
            const container = document.getElementById('videoContainer');
            const overlay = document.getElementById('playOverlay');
            const progressBar = document.getElementById('progressBar');
            const progressContainer = document.getElementById('progressContainer');
            const muteBtn = document.getElementById('muteBtn');
            const iconMute = document.getElementById('iconMute');
            const iconSound = document.getElementById('iconSound');
            const fsBtn = document.getElementById('fsBtn');
            let inactivityTimeout;

            function togglePlay() {
                if (video.paused) {
                    video.play();
                    container.classList.add('is-playing');
                    resetInactivityTimer();
                } else {
                    video.pause();
                    container.classList.remove('is-playing');
                    clearTimeout(inactivityTimeout);
                    container.classList.remove('ui-hidden');
                }
            }

            function toggleFullscreen() {
                if (!document.fullscreenElement) {
                    if (container.requestFullscreen) container.requestFullscreen();
                    else if (container.webkitRequestFullscreen) container.webkitRequestFullscreen();
                } else {
                    if (document.exitFullscreen) document.exitFullscreen();
                    else if (document.webkitExitFullscreen) document.webkitExitFullscreen();
                }
            }

            overlay.addEventListener('click', (e) => { e.stopPropagation(); togglePlay(); });
            video.addEventListener('click', togglePlay);
            container.addEventListener('dblclick', (e) => { e.preventDefault(); toggleFullscreen(); });

            // Inactivity
            function resetInactivityTimer() {
                container.classList.remove('ui-hidden');
                if (video.paused) return;
                clearTimeout(inactivityTimeout);
                inactivityTimeout = setTimeout(() => { container.classList.add('ui-hidden'); }, 3000);
            }
            container.addEventListener('mousemove', resetInactivityTimer);
            container.addEventListener('mousedown', resetInactivityTimer);

            // Audio
            video.volume = 0.1;
            muteBtn.addEventListener('click', (e) => {
                e.stopPropagation(); resetInactivityTimer();
                if (video.muted) {
                    video.muted = false; video.volume = 0.1;
                    iconMute.style.display = 'none'; iconSound.style.display = 'block';
                } else {
                    video.muted = true;
                    iconMute.style.display = 'block'; iconSound.style.display = 'none';
                }
            });

            fsBtn.addEventListener('click', (e) => { e.stopPropagation(); resetInactivityTimer(); toggleFullscreen(); });

            // Scrubbing
            let isScrubbing = false;
            video.addEventListener('timeupdate', () => {
                if (!video.duration || isScrubbing) return;
                const percent = (video.currentTime / video.duration) * 100;
                progressBar.style.width = `${percent}%`;
            });

            function scrub(e) {
                const rect = progressContainer.getBoundingClientRect();
                let pos = (e.clientX - rect.left) / rect.width;
                if (pos < 0) pos = 0; if (pos > 1) pos = 1;
                video.currentTime = pos * video.duration;
                progressBar.style.width = `${pos * 100}%`;
            }

            progressContainer.addEventListener('mousedown', (e) => {
                e.stopPropagation(); resetInactivityTimer(); isScrubbing = true; scrub(e);
            });
            document.addEventListener('mousemove', (e) => {
                if (isScrubbing) { e.preventDefault(); resetInactivityTimer(); scrub(e); }
            });
            document.addEventListener('mouseup', () => { if (isScrubbing) isScrubbing = false; });

            // Particle (Optional, but adds flair)
            function createParticles() {
                const overlay = document.getElementById('playOverlay');
                if (!overlay) return;
                setInterval(() => {
                    if (document.querySelector('.reel-container').classList.contains('is-playing')) return;
                    const p = document.createElement('div');
                    p.classList.add('play-particle');
                    const size = Math.random() * 4 + 2;
                    p.style.width = `${size}px`; p.style.height = `${size}px`;
                    const offsetX = (Math.random() - 0.5) * 100;
                    const offsetY = (Math.random() - 0.5) * 100;
                    p.style.left = `calc(50% + ${offsetX}px)`; p.style.top = `calc(50% + ${offsetY}px)`;
                    const tx = (Math.random() - 0.5) * 100;
                    p.style.setProperty('--tx', `${tx}px`);
                    overlay.appendChild(p);
                    setTimeout(() => { p.remove(); }, 3000);
                }, 200);
            }
            createParticles();
        });

        function toggleMenu() {
            document.getElementById('mobileOverlay').classList.toggle('active');
        }
    </script>
</body>

</html>